<html>
    <head>
        <title>
            Post a Day
        </title>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/tomorrow-night-eighties.min.css">
        <style>
img{
    max-width:100%;
    margin:10px;
}
        </style>
    </head>
    <body>
      <div class="container">
        <div>
            <a href="/">Home</a>
        </div>
        <div>
            <h1>Post a Day</h1>
            <div>February 6, 2017</div>
          </div>
        <div>
            <p>I would like to get better at writing. Expecially technical writing.</p>
<p>Therefore I am making it my goal to create a blog post a day for a month.</p>
<p>Since this is supposed to be a programming blog I will attempt to keep that focus.</p>
<p>Hopefully I can think of something to post everyday.</p>
<p>Onto something programming related.</p>
<p>##Making parsers</p>
<p>I enjoy writing parsers. I like the ability to create my own file formats and parse them.</p>
<p>I beleive there is virtue in rolling your own thing and learning something new.</p>
<p>For example, I was working on a project that sent out emails based on events it received.
Most of our email templates are text based and don't require any HTML in them.
However in one instance we wanted an html template to be sent out.
There already existed some format in our collection of email template files but I thought it was ugly and hard to parse.
So I just rolled my own. It's a dead simple format that made it for anyone to maintain and easy for the code to parse.</p>
<p>It consists of a header portion describing the Subject, content type and other tags and then a body that is the HTML template. eg</p>
<pre><code>Subject: Welcome
From: no-reply@mycompany.com
Content-Type: text/html
---
&lt;html&gt;
&lt;head&gt;&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;Welcome!&lt;/p&gt;
&lt;p&gt;Some content&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Stupid easy to parse, you just split the template on the <code>---</code> and to get the headers split on <code>\n</code> and <code>:</code>.</p>
<pre class="hljs"><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseThatTemplate</span>(<span class="hljs-params">template</span>)</span>{
  <span class="hljs-keyword">var</span> result = {};
  <span class="hljs-keyword">var</span> parts = template.split(<span class="hljs-string">"---"</span>);
  <span class="hljs-keyword">var</span> body = parts[<span class="hljs-number">1</span>];
  <span class="hljs-keyword">var</span> header = parts[<span class="hljs-number">0</span>];
  
  result.body = body;
  result.headers = {};
  header.split(<span class="hljs-string">"\n"</span>).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">line</span>)</span>{
    <span class="hljs-keyword">var</span> headerParts = line.split(<span class="hljs-string">":"</span>);
    <span class="hljs-keyword">var</span> key = line[<span class="hljs-number">0</span>].trim();
    <span class="hljs-keyword">var</span> value = line[<span class="hljs-number">1</span>].trim();
    
    result.headers[key] = value;
  });
  
  <span class="hljs-keyword">return</span> result;
}
</code></pre>
<p>Easy to allow templating via mustache or your flavor of template language in the html portion and is easy for the template editor to read.</p>
<p>Not a lifechaning post, but I like parsing things, so I thought I would talk about it.</p>

        </div>
        </div>
    </body>
</html>
